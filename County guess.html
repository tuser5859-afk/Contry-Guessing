<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kids Guess the Country</title>

<style>
body {
    font-family: 'Comic Sans MS', Arial, sans-serif;
    background: linear-gradient(135deg, #ffecd2, #fcb69f);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.card {
    background: #fff;
    padding: 22px;
    border-radius: 18px;
    width: 390px;
    text-align: center;
    box-shadow: 0 12px 25px rgba(0,0,0,0.25);
    transition: all 0.4s ease;
}

.card.correct {
    box-shadow: 0 0 25px #4caf50;
    border: 3px solid #4caf50;
}

.card.wrong {
    box-shadow: 0 0 25px #f44336;
    border: 3px solid #f44336;
}

h2 { color: #ff5722; }

.scoreboard {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}

.score {
    width: 48%;
    padding: 10px;
    border-radius: 12px;
    font-size: 18px;
    font-weight: bold;
}

.correctBox { background: #e8f5e9; color: #2e7d32; }
.wrongBox { background: #ffebee; color: #c62828; }

img {
    width: 220px;
    height: 140px;
    border-radius: 12px;
    border: 2px solid #ddd;
    margin: 10px 0;
}

#timer {
    font-size: 20px;
    font-weight: bold;
    color: #e53935;
}

button {
    padding: 12px 22px;
    border: none;
    border-radius: 12px;
    background: #4caf50;
    color: #fff;
    font-size: 18px;
    cursor: pointer;
}

#spoken {
    margin-top: 10px;
    font-size: 18px;
    font-weight: bold;
}

#answer {
    margin-top: 8px;
    font-size: 22px;
    font-weight: bold;
}

.infoBox {
    background: #e3f2fd;
    border-radius: 12px;
    padding: 10px;
    margin-top: 10px;
    font-size: 16px;
    display: none;
}
</style>
</head>

<body>

<div class="card" id="card">
    <h2>Guess the Country</h2>

    <div class="scoreboard">
        <div class="score correctBox">‚úÖ Right<br><span id="correct">0</span></div>
        <div class="score wrongBox">‚ùå Wrong<br><span id="wrong">0</span></div>
    </div>

    <img id="flag" src="">
    <div id="timer">Time: 00:20</div>

    <button id="startBtn">‚ñ∂Ô∏è Start Game</button>

    <div id="spoken"></div>
    <div id="answer"></div>
    <div class="infoBox" id="infoBox"></div>
</div>

<script>
const countries = [
  { name: "Afghanistan", flag: "https://flagcdn.com/w320/af.png", capital: "Kabul", continent: "Asia" },
  { name: "Albania", flag: "https://flagcdn.com/w320/al.png", capital: "Tirana", continent: "Europe" },
  { name: "Algeria", flag: "https://flagcdn.com/w320/dz.png", capital: "Algiers", continent: "Africa" },
  { name: "Andorra", flag: "https://flagcdn.com/w320/ad.png", capital: "Andorra la Vella", continent: "Europe" },
  { name: "Angola", flag: "https://flagcdn.com/w320/ao.png", capital: "Luanda", continent: "Africa" },
  { name: "Antigua and Barbuda", flag: "https://flagcdn.com/w320/ag.png", capital: "Saint John's", continent: "North America" },
  { name: "Argentina", flag: "https://flagcdn.com/w320/ar.png", capital: "Buenos Aires", continent: "South America" },
  { name: "Armenia", flag: "https://flagcdn.com/w320/am.png", capital: "Yerevan", continent: "Asia" },
  { name: "Australia", flag: "https://flagcdn.com/w320/au.png", capital: "Canberra", continent: "Oceania" },
  { name: "Austria", flag: "https://flagcdn.com/w320/at.png", capital: "Vienna", continent: "Europe" },
  { name: "Azerbaijan", flag: "https://flagcdn.com/w320/az.png", capital: "Baku", continent: "Asia" },
  { name: "Bahamas", flag: "https://flagcdn.com/w320/bs.png", capital: "Nassau", continent: "North America" },
  { name: "Bahrain", flag: "https://flagcdn.com/w320/bh.png", capital: "Manama", continent: "Asia" },
  { name: "Bangladesh", flag: "https://flagcdn.com/w320/bd.png", capital: "Dhaka", continent: "Asia" },
  { name: "Barbados", flag: "https://flagcdn.com/w320/bb.png", capital: "Bridgetown", continent: "North America" },
  { name: "Belarus", flag: "https://flagcdn.com/w320/by.png", capital: "Minsk", continent: "Europe" },
  { name: "Belgium", flag: "https://flagcdn.com/w320/be.png", capital: "Brussels", continent: "Europe" },
  { name: "Belize", flag: "https://flagcdn.com/w320/bz.png", capital: "Belmopan", continent: "North America" },
  { name: "Benin", flag: "https://flagcdn.com/w320/bj.png", capital: "Porto-Novo", continent: "Africa" },
  { name: "Bhutan", flag: "https://flagcdn.com/w320/bt.png", capital: "Thimphu", continent: "Asia" },
  { name: "Bolivia", flag: "https://flagcdn.com/w320/bo.png", capital: "Sucre", continent: "South America" },
  { name: "Bosnia and Herzegovina", flag: "https://flagcdn.com/w320/ba.png", capital: "Sarajevo", continent: "Europe" },
  { name: "Botswana", flag: "https://flagcdn.com/w320/bw.png", capital: "Gaborone", continent: "Africa" },
  { name: "Brazil", flag: "https://flagcdn.com/w320/br.png", capital: "Bras√≠lia", continent: "South America" },
  { name: "Brunei", flag: "https://flagcdn.com/w320/bn.png", capital: "Bandar Seri Begawan", continent: "Asia" },
  { name: "Bulgaria", flag: "https://flagcdn.com/w320/bg.png", capital: "Sofia", continent: "Europe" },
  { name: "Burkina Faso", flag: "https://flagcdn.com/w320/bf.png", capital: "Ouagadougou", continent: "Africa" },
  { name: "Burundi", flag: "https://flagcdn.com/w320/bi.png", capital: "Gitega", continent: "Africa" },
  { name: "Cambodia", flag: "https://flagcdn.com/w320/kh.png", capital: "Phnom Penh", continent: "Asia" },
  { name: "Cameroon", flag: "https://flagcdn.com/w320/cm.png", capital: "Yaound√©", continent: "Africa" },
  { name: "Canada", flag: "https://flagcdn.com/w320/ca.png", capital: "Ottawa", continent: "North America" },
  { name: "Chad", flag: "https://flagcdn.com/w320/td.png", capital: "N'Djamena", continent: "Africa" },
  { name: "Chile", flag: "https://flagcdn.com/w320/cl.png", capital: "Santiago", continent: "South America" },
  { name: "China", flag: "https://flagcdn.com/w320/cn.png", capital: "Beijing", continent: "Asia" },
  { name: "Colombia", flag: "https://flagcdn.com/w320/co.png", capital: "Bogot√°", continent: "South America" },
  { name: "Costa Rica", flag: "https://flagcdn.com/w320/cr.png", capital: "San Jos√©", continent: "North America" },
  { name: "Croatia", flag: "https://flagcdn.com/w320/hr.png", capital: "Zagreb", continent: "Europe" },
  { name: "Cuba", flag: "https://flagcdn.com/w320/cu.png", capital: "Havana", continent: "North America" },
  { name: "Cyprus", flag: "https://flagcdn.com/w320/cy.png", capital: "Nicosia", continent: "Asia" },
  { name: "Denmark", flag: "https://flagcdn.com/w320/dk.png", capital: "Copenhagen", continent: "Europe" },
  { name: "Egypt", flag: "https://flagcdn.com/w320/eg.png", capital: "Cairo", continent: "Africa" },
  { name: "France", flag: "https://flagcdn.com/w320/fr.png", capital: "Paris", continent: "Europe" },
  { name: "Germany", flag: "https://flagcdn.com/w320/de.png", capital: "Berlin", continent: "Europe" },
  { name: "Greece", flag: "https://flagcdn.com/w320/gr.png", capital: "Athens", continent: "Europe" },
  { name: "India", flag: "https://flagcdn.com/w320/in.png", capital: "New Delhi", continent: "Asia" },
  { name: "Indonesia", flag: "https://flagcdn.com/w320/id.png", capital: "Jakarta", continent: "Asia" },
  { name: "Iran", flag: "https://flagcdn.com/w320/ir.png", capital: "Tehran", continent: "Asia" },
  { name: "Iraq", flag: "https://flagcdn.com/w320/iq.png", capital: "Baghdad", continent: "Asia" },
  { name: "Ireland", flag: "https://flagcdn.com/w320/ie.png", capital: "Dublin", continent: "Europe" },
  { name: "Israel", flag: "https://flagcdn.com/w320/il.png", capital: "Jerusalem", continent: "Asia" },
  { name: "Italy", flag: "https://flagcdn.com/w320/it.png", capital: "Rome", continent: "Europe" },
  { name: "Japan", flag: "https://flagcdn.com/w320/jp.png", capital: "Tokyo", continent: "Asia" },
  { name: "Kenya", flag: "https://flagcdn.com/w320/ke.png", capital: "Nairobi", continent: "Africa" },
  { name: "Malaysia", flag: "https://flagcdn.com/w320/my.png", capital: "Kuala Lumpur", continent: "Asia" },
  { name: "Maldives", flag: "https://flagcdn.com/w320/mv.png", capital: "Mal√©", continent: "Asia" },
  { name: "Mexico", flag: "https://flagcdn.com/w320/mx.png", capital: "Mexico City", continent: "North America" },
  { name: "Nepal", flag: "https://flagcdn.com/w320/np.png", capital: "Kathmandu", continent: "Asia" },
  { name: "Netherlands", flag: "https://flagcdn.com/w320/nl.png", capital: "Amsterdam", continent: "Europe" },
  { name: "New Zealand", flag: "https://flagcdn.com/w320/nz.png", capital: "Wellington", continent: "Oceania" },
  { name: "Nigeria", flag: "https://flagcdn.com/w320/ng.png", capital: "Abuja", continent: "Africa" },
  { name: "Norway", flag: "https://flagcdn.com/w320/no.png", capital: "Oslo", continent: "Europe" },
  { name: "Pakistan", flag: "https://flagcdn.com/w320/pk.png", capital: "Islamabad", continent: "Asia" },
  { name: "Philippines", flag: "https://flagcdn.com/w320/ph.png", capital: "Manila", continent: "Asia" },
  { name: "Russia", flag: "https://flagcdn.com/w320/ru.png", capital: "Moscow", continent: "Europe/Asia" },
  { name: "Saudi Arabia", flag: "https://flagcdn.com/w320/sa.png", capital: "Riyadh", continent: "Asia" },
  { name: "Singapore", flag: "https://flagcdn.com/w320/sg.png", capital: "Singapore", continent: "Asia" },
  { name: "South Africa", flag: "https://flagcdn.com/w320/za.png", capital: "Pretoria", continent: "Africa" },
  { name: "South Korea", flag: "https://flagcdn.com/w320/kr.png", capital: "Seoul", continent: "Asia" },
  { name: "Spain", flag: "https://flagcdn.com/w320/es.png", capital: "Madrid", continent: "Europe" },
  { name: "Sri Lanka", flag: "https://flagcdn.com/w320/lk.png", capital: "Sri Jayawardenepura Kotte", continent: "Asia" },
  { name: "Sweden", flag: "https://flagcdn.com/w320/se.png", capital: "Stockholm", continent: "Europe" },
  { name: "Switzerland", flag: "https://flagcdn.com/w320/ch.png", capital: "Bern", continent: "Europe" },
  { name: "Thailand", flag: "https://flagcdn.com/w320/th.png", capital: "Bangkok", continent: "Asia" },
  { name: "Turkey", flag: "https://flagcdn.com/w320/tr.png", capital: "Ankara", continent: "Europe/Asia" },
  { name: "Ukraine", flag: "https://flagcdn.com/w320/ua.png", capital: "Kyiv", continent: "Europe" },
  { name: "United Arab Emirates", flag: "https://flagcdn.com/w320/ae.png", capital: "Abu Dhabi", continent: "Asia" },
  { name: "United Kingdom", flag: "https://flagcdn.com/w320/gb.png", capital: "London", continent: "Europe" },
  { name: "United States", flag: "https://flagcdn.com/w320/us.png", capital: "Washington, D.C.", continent: "North America" },
  { name: "Vietnam", flag: "https://flagcdn.com/w320/vn.png", capital: "Hanoi", continent: "Asia" },
  { name: "Zimbabwe", flag: "https://flagcdn.com/w320/zw.png", capital: "Harare", continent: "Africa" }
];


let currentCountry, timer, timeLeft = 20;
let correct = 0, wrong = 0;
let listening = false;
let micGranted = false;
let paused = false;

const flag = document.getElementById("flag");
const spoken = document.getElementById("spoken");
const answer = document.getElementById("answer");
const infoBox = document.getElementById("infoBox");
const timerEl = document.getElementById("timer");
const startBtn = document.getElementById("startBtn");
const card = document.getElementById("card");

const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = "en-US";
recognition.continuous = false;

/* üîä Speak */
function speak(text) {
 speechSynthesis.cancel();
 const msg = new SpeechSynthesisUtterance(text);
 msg.rate = 0.9;
 speechSynthesis.speak(msg);
}

/* ‚ñ∂Ô∏è Start Game */
startBtn.onclick = async () => {
 startBtn.style.display = "none";
 await askMicOnce();
 nextFlag();
};

/* üé§ Ask mic ONLY ONCE */
async function askMicOnce() {
 if (micGranted) return;
 try {
   recognition.start();
   recognition.stop();
   micGranted = true;
 } catch(e){}
}

/* üé≤ Next Flag */
function nextFlag() {
 card.classList.remove("correct","wrong");
 currentCountry = countries[Math.floor(Math.random()*countries.length)];
 flag.src = currentCountry.flag;
 spoken.textContent = "üé§ Say the country name";
 answer.textContent = "";
 infoBox.style.display = "none";
 startTimer();
 setTimeout(startListening,1200);
}

/* üéô Start listening */
function startListening() {
 if (paused) return;
 listening = true;
 recognition.start();
 speak("Say the country name");
}

/* ‚è± Timer */
function startTimer() {
 clearInterval(timer);
 timeLeft = 20;
 updateTimer();
 timer = setInterval(()=>{
  if(paused) return;
  timeLeft--;
  updateTimer();
  if(timeLeft===0){
   clearInterval(timer);
   recognition.stop();
   wrong++;
   updateScore();
   showResult(false);
  }
 },1000);
}

function updateTimer(){
 timerEl.textContent = "Time: 00:" + String(timeLeft).padStart(2,"0");
}

/* üéô Result */
recognition.onresult = e => {
 if(!listening) return;
 listening=false;
 clearInterval(timer);
 const said = e.results[0][0].transcript.toLowerCase();
 spoken.textContent="You said: "+said;
 if(said.includes(currentCountry.name.toLowerCase())){
  correct++; updateScore(); showResult(true);
 } else {
  wrong++; updateScore(); showResult(false);
 }
};

/* üì¢ Show result */
function showResult(isCorrect){
 card.classList.add(isCorrect?"correct":"wrong");
 answer.textContent = isCorrect?"üéâ YES! Correct":"‚ùå Wrong Answer";
 answer.style.color = isCorrect?"green":"red";

 speak(
  (isCorrect?"Correct. ":"Wrong. ") +
  "Country is " + currentCountry.name +
  ". Capital is " + currentCountry.capital +
  ". Continent is " + currentCountry.continent
 );

 infoBox.innerHTML = `
 <strong>${currentCountry.name}</strong><br>
 üèõ Capital: ${currentCountry.capital}<br>
 üåç Continent: ${currentCountry.continent}
 `;
 infoBox.style.display="block";

 setTimeout(nextFlag,10000); // ‚è± 10 seconds wait
}

/* üìä Score */
function updateScore(){
 document.getElementById("correct").textContent=correct;
 document.getElementById("wrong").textContent=wrong;
}

/* ‚è∏ Pause on tab change */
document.addEventListener("visibilitychange",()=>{
 paused = document.hidden;
 if(paused){
  recognition.stop();
 } else {
  updateTimer();
 }
});
</script>

</body>
</html>
